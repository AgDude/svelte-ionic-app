{"version":3,"file":"IonicControllers-2ac8d081.js","sources":["../../node_modules/svelte-custom-elements/dist/svelte-custom-elements.es.js","../../src/services/IonicControllers.js"],"sourcesContent":["function register ( tagName, Component, props = [] ) {\n\tclass SvelteElement extends HTMLElement {\n\t\tconstructor () {\n\t\t\tsuper();\n\n\t\t\tthis.target = this.attachShadow({ mode: 'open' });\n\t\t\tthis.data = {};\n\t\t}\n\n\t\tconnectedCallback () {\n\t\t\tprops.forEach( prop => {\n\t\t\t\tconst value = this[ prop ];\n\t\t\t\tif ( value !== undefined ) {\n\t\t\t\t\tthis.data[ prop ] = this[ prop ];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.instance = new Component({\n\t\t\t\ttarget: this.target,\n\t\t\t\tdata: this.data\n\t\t\t});\n\n\t\t\tprops.forEach( prop => {\n\t\t\t\tthis.instance.observe( prop, value => {\n\t\t\t\t\tthis.setAttribute( prop, value );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tdetachedCallback () {\n\t\t\tthis.instance.destroy();\n\t\t\tthis.instance = null;\n\t\t}\n\n\t\tattributeChangedCallback ( attr, oldValue, newValue ) {\n\t\t\tconst value = isNaN( newValue ) ? newValue : +newValue;\n\t\t\tthis.data[ attr ] = value;\n\t\t\tif ( this.instance ) this.instance.set({ [ attr ]: value });\n\t\t}\n\t}\n\n\tObject.defineProperty( SvelteElement, 'observedAttributes', {\n\t\tget () {\n\t\t\treturn props;\n\t\t}\n\t});\n\n\tprops.forEach( prop => {\n\t\tObject.defineProperty( SvelteElement.prototype, prop, {\n\t\t\tget () {\n\t\t\t\treturn this.instance ? this.instance.get( prop ) : this.data[ prop ];\n\t\t\t},\n\n\t\t\tset ( value ) {\n\t\t\t\tthis.data[ prop ] = value;\n\t\t\t\tif ( this.instance ) this.instance.set({ [ prop ]: value });\n\t\t\t}\n\t\t});\n\t});\n\n\tcustomElements.define( tagName, SvelteElement );\n\treturn SvelteElement;\n}\n\nexport { register };\n","import { register } from \"svelte-custom-elements\";\r\n\r\n//\r\n// Private functions \r\n//\r\n// see if webcomponent is already created\r\nconst isRegistered = function(name) {\r\n    return document.createElement(name).constructor !== HTMLElement;\r\n};\r\n\r\n// add DOM element if it not exists and return to caller\r\nconst registerDOMOnce = (selector) => {\r\n    let controller = document.querySelector(selector);\r\n    if (!controller) {\r\n        controller = document.createElement(selector);\r\n        document.body.appendChild(controller);\r\n    }\r\n    return controller;\r\n}\r\n\r\n// default pattern for many ionic UI controllers\r\nconst DefaultIonicController = (selector) => {\r\n    return (options) => {\r\n        const controller = registerDOMOnce(selector);\r\n        return controller\r\n            .create(options)\r\n            .then(ionicitem => {\r\n                ionicitem.present()\r\n                return ionicitem; // a promise that needs resolution to access dimiss etc.\r\n            })\r\n    }\r\n}\r\n\r\n\r\n//\r\n// API methods\r\n//\r\n// register webcomponent if not yet done\r\nexport const registerWebComponentOnce = (selector, component) => {\r\n    if (!isRegistered(selector)) {\r\n        register(selector, component, []);\r\n    }\r\n};\r\n\r\nexport const getIonicNav = () => {\r\n    return document.querySelector(\"ion-nav\");\r\n}\r\n\r\nexport const IonicShowModal = (selector, component, componentProps) => {\r\n    const controller = registerDOMOnce(\"ion-modal-controller\");\r\n    registerWebComponentOnce(selector, component);\r\n    return controller\r\n        .create({\r\n            component: selector,\r\n            componentProps\r\n        })\r\n        .then(modal => {\r\n            modal.present();\r\n            return modal.onWillDismiss()\r\n        });\r\n};\r\n\r\nexport const IonicShowPopover = (event, selector, component, componentProps) => {\r\n    registerWebComponentOnce(selector, component);\r\n    const controller = registerDOMOnce(\"ion-popover-controller\");\r\n    return controller\r\n        .create({\r\n            component: selector,\r\n            event,\r\n            componentProps\r\n        })\r\n        .then(popover => {\r\n            popover.present();\r\n            return popover.onWillDismiss();\r\n        });\r\n};\r\n\r\nexport const IonicShowLoading = DefaultIonicController(\"ion-loading-controller\");\r\nexport const IonicShowPicker = DefaultIonicController(\"ion-picker-controller\");\r\nexport const IonicShowAlert = DefaultIonicController(\"ion-alert-controller\");\r\nexport const IonicShowToast = DefaultIonicController(\"ion-toast-controller\");\r\nexport const IonicShowActionSheet = DefaultIonicController(\"ion-action-sheet-controller\");"],"names":["register","tagName","Component","props","SvelteElement","HTMLElement","[object Object]","super","this","target","attachShadow","mode","data","forEach","prop","undefined","instance","observe","value","setAttribute","destroy","attr","oldValue","newValue","isNaN","set","Object","defineProperty","get","prototype","customElements","define","registerDOMOnce","selector","controller","document","querySelector","createElement","body","appendChild","DefaultIonicController","options","create","then","ionicitem","present","registerWebComponentOnce","component","name","constructor","getIonicNav","IonicShowModal","componentProps","modal","onWillDismiss","IonicShowPopover","event","popover","IonicShowLoading","IonicShowPicker","IonicShowAlert","IonicShowToast","IonicShowActionSheet"],"mappings":"AAAA,SAASA,EAAWC,EAASC,EAAWC,EAAQ,IAC/C,MAAMC,UAAsBC,YAC3BC,cACCC,QAEAC,KAAKC,OAASD,KAAKE,aAAa,CAAEC,KAAM,SACxCH,KAAKI,KAAO,GAGbN,oBACCH,EAAMU,QAASC,SAECC,IADDP,KAAMM,KAEnBN,KAAKI,KAAME,GAASN,KAAMM,MAI5BN,KAAKQ,SAAW,IAAId,EAAU,CAC7BO,OAAQD,KAAKC,OACbG,KAAMJ,KAAKI,OAGZT,EAAMU,QAASC,IACdN,KAAKQ,SAASC,QAASH,EAAMI,IAC5BV,KAAKW,aAAcL,EAAMI,OAK5BZ,mBACCE,KAAKQ,SAASI,UACdZ,KAAKQ,SAAW,KAGjBV,yBAA2Be,EAAMC,EAAUC,GAC1C,MAAML,EAAQM,MAAOD,GAAaA,GAAYA,EAC9Cf,KAAKI,KAAMS,GAASH,EACfV,KAAKQ,UAAWR,KAAKQ,SAASS,IAAI,CAAEnB,CAAEe,GAAQH,KAwBrD,OApBAQ,OAAOC,eAAgBvB,EAAe,qBAAsB,CAC3DwB,IAAI,IACIzB,IAITA,EAAMU,QAASC,IACdY,OAAOC,eAAgBvB,EAAcyB,UAAWf,EAAM,CACrDR,MACC,OAAOE,KAAKQ,SAAWR,KAAKQ,SAASY,IAAKd,GAASN,KAAKI,KAAME,IAG/DR,IAAMY,GACLV,KAAKI,KAAME,GAASI,EACfV,KAAKQ,UAAWR,KAAKQ,SAASS,IAAI,CAAEnB,CAAEQ,GAAQI,SAKtDY,eAAeC,OAAQ9B,EAASG,GACzBA,ECvDR,MAKM4B,EAAmBC,IACrB,IAAIC,EAAaC,SAASC,cAAcH,GAKxC,OAJKC,IACDA,EAAaC,SAASE,cAAcJ,GACpCE,SAASG,KAAKC,YAAYL,IAEvBA,GAILM,EAA0BP,GACpBQ,GACeT,EAAgBC,GAE9BS,OAAOD,GACPE,KAAKC,IACFA,EAAUC,UACHD,IAUVE,EAA2B,CAACb,EAAUc,KAhC9B,IAASC,EAAAA,EAiCRf,EAhCXE,SAASE,cAAcW,GAAMC,cAAgB5C,aAiChDL,EAASiC,EAAUc,EAAW,KAIzBG,EAAc,IAChBf,SAASC,cAAc,WAGrBe,EAAiB,CAAClB,EAAUc,EAAWK,KAChD,MAAMlB,EAAaF,EAAgB,wBAEnC,OADAc,EAAyBb,EAAUc,GAC5Bb,EACFQ,OAAO,CACJK,UAAWd,EACXmB,eAAAA,IAEHT,KAAKU,IACFA,EAAMR,UACCQ,EAAMC,mBAIZC,EAAmB,CAACC,EAAOvB,EAAUc,EAAWK,KACzDN,EAAyBb,EAAUc,GAChBf,EAAgB,0BAE9BU,OAAO,CACJK,UAAWd,EACXuB,MAAAA,EACAJ,eAAAA,IAEHT,KAAKc,IACFA,EAAQZ,UACDY,EAAQH,mBAIdI,EAAmBlB,EAAuB,0BAC1CmB,EAAkBnB,EAAuB,yBACzCoB,EAAiBpB,EAAuB,wBACxCqB,EAAiBrB,EAAuB,wBACxCsB,EAAuBtB,EAAuB"}